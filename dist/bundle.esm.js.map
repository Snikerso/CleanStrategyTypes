{"version":3,"file":"bundle.esm.js","sources":["../src/index.ts"],"sourcesContent":["export interface IVote {\r\n  id: string;\r\n  roundId: string;\r\n  userId: string;\r\n  taskId: string;\r\n  count?: number;\r\n  spaceId: string;\r\n  createdAt: Date;\r\n}\r\n\r\nexport type ITask = {\r\n  id: string;\r\n  title: string;\r\n  value: number;\r\n  categoryId?: string;\r\n};\r\n\r\nexport type ISpace = {\r\n  id: string;\r\n  name: string;\r\n  roles: string[];\r\n};\r\n\r\nexport interface ICurrentUser {\r\n  id: string;\r\n  displayName: string;\r\n  email: string;\r\n  deviceId: string;\r\n  tenants: ISpace[];\r\n}\r\n\r\nexport interface IUser {\r\n  id: string;\r\n  displayName: string;\r\n}\r\n\r\nexport interface IRound {\r\n  id: string;\r\n  order: number;\r\n  spaceId: string;\r\n  endDate: Date;\r\n  status?: \"finished\" | \"active\";\r\n}\r\n\r\nexport interface IStats extends Record<string, Record<string, number>> {}\r\n\r\nexport interface ICategory {\r\n  id: string;\r\n  name: string;\r\n  spaceId?: string;\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n}\r\n\r\nexport enum SpaceEventTypes {\r\n  CONNECT = \"CONNECT\",\r\n  DISCONNECT = \"DISCONNECT\",\r\n  VOTE = \"VOTE\",\r\n  DELETE_VOTE = \"DELETE_VOTE\",\r\n  RESET_VOTES = \"RESET_VOTES\",\r\n  START_ROUND = \"START_ROUND\",\r\n  PLAYER_ADDED = \"PLAYER_ADDED\",\r\n  PLAYER_REMOVED = \"PLAYER_REMOVED\",\r\n  TASK_CREATED = \"TASK_CREATED\",\r\n  TASK_UPDATED = \"TASK_UPDATED\",\r\n  TASK_DELETED = \"TASK_DELETED\",\r\n  TASK_CREATION_ERROR = \"TASK_CREATION_ERROR\",\r\n  TASK_UPDATE_ERROR = \"TASK_UPDATE_ERROR\",\r\n  TASK_DELETE_ERROR = \"TASK_DELETE_ERROR\",\r\n  CATEGORY_CREATED = \"CATEGORY_CREATED\",\r\n  CATEGORY_DELETED = \"CATEGORY_DELETED\",\r\n  ASSING_TASK_TO_CATEGORY = \"ASSING_TASK_TO_CATEGORY\",\r\n  REMOVE_TASK_FROM_CATEGORY = \"REMOVE_TASK_FROM_CATEGORY\",\r\n  SPACE_ERROR = \"SPACE_ERROR\",\r\n  CREATE_TASK = \"CREATE_TASK\",\r\n  UPDATE_TASK = \"UPDATE_TASK\",\r\n  DELETE_TASK = \"DELETE_TASK\",\r\n  CREATE_CATEGORY = \"CREATE_CATEGORY\",\r\n  DELETE_CATEGORY = \"DELETE_CATEGORY\",\r\n}\r\n//\r\n\r\n// RequestMessage\r\n\r\nexport type VoteMessageBody = {\r\n  type: \"minus\" | \"plus\";\r\n  taskId: string;\r\n  currentUserId: string;\r\n};\r\n\r\nexport type VoteDeleteMessageBody = {\r\n  voteId: string;\r\n};\r\n\r\nexport type CreateTaskMessageBody = {\r\n  title: string;\r\n  description: string;\r\n  value: number;\r\n  categoryId?: string;\r\n};\r\n\r\nexport type UpdateTaskMessageBody = {\r\n  taskId: string;\r\n  title: string;\r\n  description: string;\r\n  value: number;\r\n};\r\n\r\nexport type DeleteTaskMessageBody = {\r\n  taskId: string;\r\n};\r\n\r\nexport type CreateCategoryMessageBody = {\r\n  category: { name: string };\r\n  taskIDs?: string[];\r\n};\r\n\r\nexport type AssignTaskToCategoryMessageBody = {\r\n  taskId: string;\r\n  categoryId: string;\r\n};\r\n\r\nexport type RemoveTaskFromCategoryMessageBody = {\r\n  taskId: string;\r\n  categoryId: string;\r\n};\r\n\r\nexport type DeleteCategoryMessageBody = {\r\n  categoryId: string;\r\n};\r\n\r\n// HTTP DTOs (shared)\r\nexport type CreateSpaceDto = {\r\n  spaceName: string;\r\n  taskTemplateId?: string;\r\n  taskTemplate?: string;\r\n};\r\n\r\nexport type InviteSpaceDto = {\r\n  email: string;\r\n};\r\n\r\nexport type CreatePlayerDto = {\r\n  displayName: string;\r\n};\r\n\r\nexport type UpdatePlayerDto = {\r\n  displayName?: string;\r\n};\r\n\r\nexport type SaveNotificationTokenDto = {\r\n  token: string;\r\n};\r\n\r\nexport type UpdateDisplayNameDto = {\r\n  displayName: string;\r\n};\r\n\r\nexport type SendPushNotificationDto = {\r\n  pushToken: string;\r\n  title: string;\r\n  body: string;\r\n  data?: Record<string, any>;\r\n};\r\n\r\nexport type SendMultiplePushNotificationDto = {\r\n  pushTokens: string[];\r\n  title: string;\r\n  body: string;\r\n  data?: Record<string, any>;\r\n};\r\n\r\nexport type GetReceiptsDto = {\r\n  receiptIds: string[];\r\n};\r\n\r\nexport type SpaceStatisticsQueryDto = {\r\n  startDate: string; // ISO8601\r\n  endDate: string; // ISO8601\r\n};\r\n\r\n// ResponseMessage\r\ntype ResponseMessageBase = {\r\n  errorMessages?: { type: string; message: string }[];\r\n};\r\n\r\nexport type VoteMessageResponse = ResponseMessageBase & {\r\n  vote: IVote;\r\n};\r\n\r\nexport type VoteDeleteMessageResponse = ResponseMessageBase & {\r\n  voteId: string;\r\n};\r\n\r\nexport type StartRoundResponseMessage = ResponseMessageBase & {\r\n  round: IRound;\r\n};\r\n\r\nexport type ConnectMessageResponse = ResponseMessageBase & {\r\n  votes: IVote[];\r\n  tasks: ITask[];\r\n  users: IUser[];\r\n  currentPeriod: IRound;\r\n  stats: IStats;\r\n  categories?: ICategory[];\r\n};\r\n\r\nexport type ResetVotesMessageResponse = ResponseMessageBase & {\r\n  votes: IVote[];\r\n};\r\n\r\nexport type StartRoundMessageResponse = ResponseMessageBase & {\r\n  round?: IRound;\r\n};\r\n\r\nexport type PlayerAddedMessageResponse = ResponseMessageBase & {\r\n  player: {\r\n    id: string;\r\n    displayName: string;\r\n    userId?: string;\r\n    email?: string;\r\n  };\r\n};\r\n\r\nexport type PlayerRemovedMessageResponse = ResponseMessageBase & {\r\n  playerId: string;\r\n};\r\n\r\nexport type TaskCreatedMessageResponse = ResponseMessageBase & {\r\n  task: ITask;\r\n};\r\n\r\nexport type TaskUpdatedMessageResponse = ResponseMessageBase & {\r\n  task: ITask;\r\n};\r\n\r\nexport type TaskDeletedMessageResponse = ResponseMessageBase & {\r\n  taskId: string;\r\n};\r\n\r\nexport type TaskCreationErrorMessageResponse = ResponseMessageBase & {\r\n  message: string;\r\n};\r\n\r\nexport type TaskUpdateErrorMessageResponse = ResponseMessageBase & {\r\n  message: string;\r\n};\r\n\r\nexport type TaskDeleteErrorMessageResponse = ResponseMessageBase & {\r\n  message: string;\r\n};\r\n\r\nexport type CategoryCreatedMessageResponse = ResponseMessageBase & {\r\n  category: ICategory;\r\n  updatedTaskIDs?: string[];\r\n};\r\n\r\nexport type CategoryDeletedMessageResponse = ResponseMessageBase & {\r\n  categoryId: string;\r\n  tasks: ITask[];\r\n};\r\n\r\nexport type AssignTaskToCategoryMessageResponse = ResponseMessageBase & {\r\n  taskId: string;\r\n  categoryId: string;\r\n};\r\n\r\nexport type RemoveTaskFromCategoryMessageResponse = ResponseMessageBase & {\r\n  taskId: string;\r\n  categoryId: string;\r\n};\r\n\r\nexport type SpaceErrorMessageResponse = ResponseMessageBase & {\r\n  message: string;\r\n};\r\n\r\nexport interface GameServerToClientEvents {\r\n  [SpaceEventTypes.CONNECT]: (message: ConnectMessageResponse) => void;\r\n  [SpaceEventTypes.DISCONNECT]: (message: any) => void;\r\n  [SpaceEventTypes.START_ROUND]: (message: StartRoundMessageResponse) => void;\r\n  [SpaceEventTypes.VOTE]: (message: VoteMessageResponse) => void;\r\n  [SpaceEventTypes.DELETE_VOTE]: (message: VoteDeleteMessageResponse) => void;\r\n  [SpaceEventTypes.RESET_VOTES]: (message: ResetVotesMessageResponse) => void;\r\n  [SpaceEventTypes.PLAYER_ADDED]: (message: PlayerAddedMessageResponse) => void;\r\n  [SpaceEventTypes.PLAYER_REMOVED]: (message: PlayerRemovedMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_CREATED]: (message: TaskCreatedMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_UPDATED]: (message: TaskUpdatedMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_DELETED]: (message: TaskDeletedMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_CREATION_ERROR]: (message: TaskCreationErrorMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_UPDATE_ERROR]: (message: TaskUpdateErrorMessageResponse) => void;\r\n  [SpaceEventTypes.TASK_DELETE_ERROR]: (message: TaskDeleteErrorMessageResponse) => void;\r\n  [SpaceEventTypes.CATEGORY_CREATED]: (message: CategoryCreatedMessageResponse) => void;\r\n  [SpaceEventTypes.CATEGORY_DELETED]: (message: CategoryDeletedMessageResponse) => void;\r\n  [SpaceEventTypes.ASSING_TASK_TO_CATEGORY]: (message: AssignTaskToCategoryMessageResponse) => void;\r\n  [SpaceEventTypes.REMOVE_TASK_FROM_CATEGORY]: (message: RemoveTaskFromCategoryMessageResponse) => void;\r\n  [SpaceEventTypes.SPACE_ERROR]: (message: SpaceErrorMessageResponse) => void;\r\n}\r\n\r\nexport interface GameClientToServerEvents {\r\n  [SpaceEventTypes.CONNECT]: (message: any) => void;\r\n  [SpaceEventTypes.START_ROUND]: (message: any) => void;\r\n  [SpaceEventTypes.VOTE]: (message: VoteMessageBody) => void;\r\n  [SpaceEventTypes.DELETE_VOTE]: (message: VoteDeleteMessageBody) => void;\r\n  [SpaceEventTypes.RESET_VOTES]: (message: any) => void;\r\n  [SpaceEventTypes.CREATE_TASK]: (message: CreateTaskMessageBody) => void;\r\n  [SpaceEventTypes.UPDATE_TASK]: (message: UpdateTaskMessageBody) => void;\r\n  [SpaceEventTypes.DELETE_TASK]: (message: DeleteTaskMessageBody) => void;\r\n  [SpaceEventTypes.CREATE_CATEGORY]: (message: CreateCategoryMessageBody) => void;\r\n  [SpaceEventTypes.ASSING_TASK_TO_CATEGORY]: (message: AssignTaskToCategoryMessageBody) => void;\r\n  [SpaceEventTypes.REMOVE_TASK_FROM_CATEGORY]: (message: RemoveTaskFromCategoryMessageBody) => void;\r\n  [SpaceEventTypes.DELETE_CATEGORY]: (message: DeleteCategoryMessageBody) => void;\r\n}\r\n"],"names":[],"mappings":"IAsDY,gBAyBX;AAzBD,CAAA,UAAY,eAAe,EAAA;AACzB,IAAA,eAAA,CAAA,SAAA,CAAA,GAAA,SAAmB,CAAA;AACnB,IAAA,eAAA,CAAA,YAAA,CAAA,GAAA,YAAyB,CAAA;AACzB,IAAA,eAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AACb,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,cAAA,CAAA,GAAA,cAA6B,CAAA;AAC7B,IAAA,eAAA,CAAA,gBAAA,CAAA,GAAA,gBAAiC,CAAA;AACjC,IAAA,eAAA,CAAA,cAAA,CAAA,GAAA,cAA6B,CAAA;AAC7B,IAAA,eAAA,CAAA,cAAA,CAAA,GAAA,cAA6B,CAAA;AAC7B,IAAA,eAAA,CAAA,cAAA,CAAA,GAAA,cAA6B,CAAA;AAC7B,IAAA,eAAA,CAAA,qBAAA,CAAA,GAAA,qBAA2C,CAAA;AAC3C,IAAA,eAAA,CAAA,mBAAA,CAAA,GAAA,mBAAuC,CAAA;AACvC,IAAA,eAAA,CAAA,mBAAA,CAAA,GAAA,mBAAuC,CAAA;AACvC,IAAA,eAAA,CAAA,kBAAA,CAAA,GAAA,kBAAqC,CAAA;AACrC,IAAA,eAAA,CAAA,kBAAA,CAAA,GAAA,kBAAqC,CAAA;AACrC,IAAA,eAAA,CAAA,yBAAA,CAAA,GAAA,yBAAmD,CAAA;AACnD,IAAA,eAAA,CAAA,2BAAA,CAAA,GAAA,2BAAuD,CAAA;AACvD,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC3B,IAAA,eAAA,CAAA,iBAAA,CAAA,GAAA,iBAAmC,CAAA;AACnC,IAAA,eAAA,CAAA,iBAAA,CAAA,GAAA,iBAAmC,CAAA;AACrC,CAAC,EAzBW,eAAe,KAAf,eAAe,GAyB1B,EAAA,CAAA,CAAA;;;;"}